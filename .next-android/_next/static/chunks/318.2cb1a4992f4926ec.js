"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[318],{3318:function(e,t,a){a.r(t),a.d(t,{default:function(){return i}});var s=a(7437),l=a(2265);let r=["Tu talento merece ser visto","Cada habilidad tiene valor","Est\xe1s a un paso de conectar con tu comunidad","Miles de personas buscan lo que t\xfa sabes hacer"];function i(e){let{isOpen:t,onClose:a,onComplete:i,userToken:o,userName:n,userAvatar:d}=e,[c,x]=(0,l.useState)(1),[m,u]=(0,l.useState)({location:{lat:0,lng:0,address:""},hourly_rate:15e3,skills:[],bio:""}),[b,h]=(0,l.useState)(!1),[p,g]=(0,l.useState)(!1),[f,j]=(0,l.useState)([]),[v,N]=(0,l.useState)(null),[y,w]=(0,l.useState)(""),[k,C]=(0,l.useState)(""),_=r[Math.floor(Math.random()*r.length)];(0,l.useEffect)(()=>{let e=localStorage.getItem("user_lat"),t=localStorage.getItem("user_lng");if(e&&t){let a=parseFloat(e),s=parseFloat(t);u(e=>({...e,location:{lat:a,lng:s,address:"".concat(a.toFixed(4),", ").concat(s.toFixed(4))}}))}},[]),(0,l.useEffect)(()=>{fetch("/api/v1/categories").then(e=>e.json()).then(e=>j(e.data||e||[])).catch(()=>{})},[]);let D=e=>{u(t=>({...t,skills:t.skills.includes(e)?t.skills.filter(t=>t!==e):[...t.skills,e]}))},S=()=>{y.trim()&&!m.skills.includes(y.trim())&&(u(e=>({...e,skills:[...e.skills,y.trim()]})),w(""))},L=()=>1===c?0!==m.location.lat:2===c?null!==v:3!==c||m.hourly_rate>=5e3,E=async()=>{h(!0);try{(await fetch("/api/v1/worker/onboarding",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({latitude:m.location.lat,longitude:m.location.lng,hourly_rate:m.hourly_rate,category_id:v,skills:m.skills,bio:m.bio})})).ok?(localStorage.setItem("onboarding_done_".concat(n),"true"),i({...m,category_id:v||void 0})):C("Error al guardar. Intenta nuevamente.")}catch(e){C("Sin conexi\xf3n. Revisa tu internet.")}h(!1)};if(!t)return null;let z=n.split(" ")[0],T=()=>(0,s.jsxs)("div",{className:"relative inline-flex h-5 w-5 items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 rounded-full border-[2px] border-teal-400"}),(0,s.jsx)("div",{className:"absolute h-1/2 w-[2px] origin-bottom rounded-full bg-gradient-to-t from-teal-400 to-amber-300",style:{bottom:"50%",animation:"spin 2s linear infinite"}}),(0,s.jsx)("div",{className:"z-10 h-[3px] w-[3px] rounded-full bg-amber-400"})]});return(0,s.jsx)("div",{className:"fixed inset-0 z-[600] flex items-center justify-center bg-slate-950/80 backdrop-blur-md animate-fade-in",children:(0,s.jsxs)("div",{className:"bg-slate-900 rounded-3xl shadow-2xl w-[92%] max-w-lg mx-4 overflow-hidden animate-scale-in max-h-[90vh] overflow-y-auto border border-slate-700/50",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 p-6 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-3 right-3 opacity-10",children:(0,s.jsxs)("div",{className:"relative h-16 w-16",children:[(0,s.jsx)("div",{className:"absolute inset-0 rounded-full border-[3px] border-teal-400"}),(0,s.jsx)("div",{className:"absolute h-1/2 w-[3px] origin-bottom rounded-full bg-gradient-to-t from-teal-400 to-amber-300",style:{bottom:"50%",animation:"spin 6s linear infinite"}})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[d?(0,s.jsx)("img",{src:d,className:"w-14 h-14 rounded-full object-cover border-2 border-teal-400/50",alt:z}):(0,s.jsx)("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-teal-400 to-teal-600 flex items-center justify-center text-white text-xl font-black border-2 border-teal-400/50",children:z.charAt(0)}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-white text-xl font-black",children:["Hola, ",z]}),(0,s.jsx)("p",{className:"text-amber-400/80 text-xs font-semibold italic",children:_})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("p",{className:"text-slate-400 text-xs font-bold",children:["Paso ",c," de ",4]}),(0,s.jsx)("div",{className:"flex-1 h-1.5 bg-slate-700 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-teal-400 to-amber-400 transition-all duration-500 rounded-full",style:{width:"".concat(c/4*100,"%")}})})]}),(0,s.jsx)("p",{className:"text-slate-500 text-[10px] mt-2",children:"Este formulario aparecer\xe1 hasta completar ubicaci\xf3n, categor\xeda y tarifa"})]}),(0,s.jsxs)("div",{className:"p-5",children:[k&&(0,s.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 mb-4",children:(0,s.jsx)("p",{className:"text-red-400 text-xs font-semibold",children:k})}),1===c&&(0,s.jsxs)("div",{className:"space-y-4 animate-slide-up",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h4",{className:"text-lg font-black text-white mb-1",children:"Tu Ubicaci\xf3n"}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:"Veremos qu\xe9 oportunidades hay cerca de ti"})]}),(0,s.jsx)("div",{className:"bg-slate-800 rounded-2xl p-5 border border-slate-700",children:0!==m.location.lat?(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-teal-500/20 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-teal-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("p",{className:"text-teal-400 text-sm font-bold",children:"Ubicaci\xf3n obtenida"}),(0,s.jsx)("p",{className:"text-slate-500 text-xs mt-1",children:m.location.address})]}):(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("svg",{className:"w-14 h-14 text-slate-600 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,s.jsx)("p",{className:"text-slate-500 text-sm",children:"A\xfan no tenemos tu ubicaci\xf3n"})]})}),(0,s.jsx)("button",{onClick:()=>{if(!("geolocation"in navigator)){C("Tu navegador no soporta geolocalizaci\xf3n");return}g(!0),C(""),navigator.geolocation.getCurrentPosition(e=>{u(t=>({...t,location:{lat:e.coords.latitude,lng:e.coords.longitude,address:"".concat(e.coords.latitude.toFixed(4),", ").concat(e.coords.longitude.toFixed(4))}})),g(!1)},()=>{C("No pudimos obtener tu ubicaci\xf3n. Activa el GPS e intenta de nuevo."),g(!1)},{enableHighAccuracy:!0,timeout:1e4})},disabled:p,className:"w-full bg-gradient-to-r from-teal-500 to-teal-600 text-white py-3.5 rounded-xl font-bold text-sm hover:from-teal-600 hover:to-teal-700 transition shadow-lg shadow-teal-500/20 disabled:opacity-50 flex items-center justify-center gap-2",children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T,{})," ",(0,s.jsx)("span",{children:"Obteniendo ubicaci\xf3n..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"\uD83D\uDCCD"})," ",(0,s.jsx)("span",{children:"Compartir mi ubicaci\xf3n"})]})}),(0,s.jsx)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-3",children:(0,s.jsx)("p",{className:"text-slate-400 text-xs",children:"\uD83D\uDD12 Tu ubicaci\xf3n exacta nunca se muestra. Los clientes solo ven la distancia aproximada."})})]}),2===c&&(0,s.jsxs)("div",{className:"space-y-4 animate-slide-up",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h4",{className:"text-lg font-black text-white mb-1",children:"\xbfQu\xe9 servicio ofreces?"}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:"Elige tu categor\xeda principal"})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-[40vh] overflow-y-auto pr-1",children:f.map(e=>(0,s.jsxs)("button",{onClick:()=>N(e.id),className:"flex items-center gap-2.5 px-3 py-3 rounded-xl text-left transition-all ".concat(v===e.id?"bg-teal-500/20 border-2 border-teal-400 text-teal-300 shadow-[0_0_12px_rgba(45,212,191,0.15)]":"bg-slate-800 border-2 border-slate-700 text-slate-400 hover:border-slate-600"),children:[(0,s.jsx)("span",{className:"text-lg",children:e.icon||"\uD83D\uDCCC"}),(0,s.jsx)("span",{className:"text-xs font-bold leading-tight",children:e.name})]},e.id))}),v&&(0,s.jsx)("div",{className:"bg-teal-500/10 border border-teal-500/30 rounded-xl p-3",children:(0,s.jsx)("p",{className:"text-teal-400 text-xs font-semibold",children:"✅ Podr\xe1s agregar m\xe1s categor\xedas despu\xe9s en tu perfil"})})]}),3===c&&(0,s.jsxs)("div",{className:"space-y-4 animate-slide-up",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h4",{className:"text-lg font-black text-white mb-1",children:"Tu Tarifa Base"}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:"Un valor de referencia inicial — lo puedes ajustar despu\xe9s"})]}),(0,s.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl p-5",children:[(0,s.jsxs)("div",{className:"text-center mb-5",children:[(0,s.jsx)("p",{className:"text-xs text-slate-500 mb-1",children:"Tarifa por hora"}),(0,s.jsxs)("p",{className:"text-4xl font-black bg-gradient-to-r from-teal-300 to-amber-300 bg-clip-text text-transparent",children:["$",m.hourly_rate.toLocaleString()]}),(0,s.jsx)("p",{className:"text-[10px] text-slate-600 mt-1",children:"CLP / hora"})]}),(0,s.jsx)("input",{type:"range",min:"3000",max:"80000",step:"1000",value:m.hourly_rate,onChange:e=>u(t=>({...t,hourly_rate:parseInt(e.target.value)})),className:"w-full accent-teal-400"}),(0,s.jsxs)("div",{className:"flex justify-between text-[10px] text-slate-600 mt-1",children:[(0,s.jsx)("span",{children:"$3.000"}),(0,s.jsx)("span",{children:"$80.000"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2",children:[8e3,12e3,18e3,25e3].map(e=>(0,s.jsxs)("button",{onClick:()=>u(t=>({...t,hourly_rate:e})),className:"py-2 rounded-lg text-xs font-bold transition ".concat(m.hourly_rate===e?"bg-teal-500 text-white":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"),children:["$",e/1e3,"k"]},e))}),(0,s.jsx)("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-xl p-3",children:(0,s.jsx)("p",{className:"text-amber-400 text-xs",children:"\uD83D\uDCA1 Esta tarifa es solo una referencia. Cada trabajo puede tener un precio diferente."})})]}),4===c&&(0,s.jsxs)("div",{className:"space-y-4 animate-slide-up",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h4",{className:"text-lg font-black text-white mb-1",children:"Toque final"}),(0,s.jsx)("p",{className:"text-sm text-slate-400",children:"Opcional — mejora tu visibilidad"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-bold text-slate-400 mb-2",children:"Habilidades"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1.5",children:["Instalaci\xf3n","Reparaci\xf3n","Pintura","Electricidad","Gasfiter\xeda","Carpinter\xeda","Jardiner\xeda","Limpieza","Mudanzas","Delivery","Cocina","Cuidado"].map(e=>(0,s.jsx)("button",{onClick:()=>D(e),className:"px-3 py-1.5 rounded-full text-xs font-semibold transition ".concat(m.skills.includes(e)?"bg-teal-500 text-white":"bg-slate-800 text-slate-400 border border-slate-700"),children:e},e))}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,s.jsx)("input",{type:"text",value:y,onChange:e=>w(e.target.value),onKeyDown:e=>"Enter"===e.key&&S(),placeholder:"Otra habilidad...",className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-200 outline-none focus:border-teal-500 placeholder:text-slate-600"}),(0,s.jsx)("button",{onClick:S,className:"px-3 py-2 bg-teal-500 text-white rounded-lg font-bold text-sm",children:"+"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-bold text-slate-400 mb-2",children:"Sobre ti (opcional)"}),(0,s.jsx)("textarea",{value:m.bio,onChange:e=>u(t=>({...t,bio:e.target.value})),placeholder:"Ej: Tengo experiencia en gasfiter\xeda, trabajo limpio y garantizado...",rows:3,className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-xl text-sm text-slate-200 outline-none resize-none focus:border-teal-500 placeholder:text-slate-600"})]}),(0,s.jsx)("div",{className:"bg-teal-500/10 border border-teal-500/30 rounded-xl p-3",children:(0,s.jsx)("p",{className:"text-teal-400 text-xs font-semibold",children:"\uD83C\uDF89 \xa1Ya casi! Con estos datos empezar\xe1s a aparecer en el mapa"})})]}),(0,s.jsxs)("div",{className:"flex gap-3 mt-5",children:[c>1&&(0,s.jsx)("button",{onClick:()=>{x(c-1),C("")},className:"flex-1 bg-slate-800 text-slate-400 py-3 rounded-xl font-bold text-sm hover:bg-slate-700 transition border border-slate-700",children:"Atr\xe1s"}),c<4?(0,s.jsx)("button",{onClick:()=>{L()&&(x(c+1),C(""))},disabled:!L(),className:"flex-1 bg-gradient-to-r from-teal-500 to-teal-600 text-white py-3 rounded-xl font-bold text-sm transition shadow-lg shadow-teal-500/20 disabled:opacity-30 disabled:shadow-none",children:"Siguiente"}):(0,s.jsx)("button",{onClick:E,disabled:b,className:"flex-1 bg-gradient-to-r from-amber-400 to-amber-500 text-slate-900 py-3 rounded-xl font-black text-sm transition shadow-lg shadow-amber-400/20 disabled:opacity-50",children:b?(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(T,{}),(0,s.jsx)("span",{children:"Guardando..."})]}):"Completar Perfil"})]}),1===c&&(0,s.jsx)("button",{onClick:a,className:"w-full mt-3 text-xs text-slate-600 hover:text-slate-400 font-semibold transition",children:"Lo har\xe9 despu\xe9s"})]})]})})}}}]);