(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{4161:function(n,e,t){"use strict";t.r(e);var r=t(7437),o=t(8369),i=t(2679),a=t(755),u=t(2896),l=t(6881),c=t(759),s=t.n(c);t(5046);var f=t(2265);let d={active:{ring:"#22c55e",dot:"#22c55e",bg:"#22c55e",opacity:"1",shadow:"0 8px 24px rgba(34,197,94,0.25)",grayscale:""},intermediate:{ring:"#38bdf8",dot:"#38bdf8",bg:"#38bdf8",opacity:"0.9",shadow:"0 6px 18px rgba(56,189,248,0.3)",grayscale:""},inactive:{ring:"#6b7280",dot:"#6b7280",bg:"#6b7280",opacity:"0.5",shadow:"0 4px 12px rgba(107,114,128,0.15)",grayscale:"filter:grayscale(0.4);"},demand:{ring:"#d97706",dot:"#d97706",bg:"linear-gradient(135deg, #d97706, #f59e0b)",opacity:"1",shadow:"0 8px 24px rgba(217,119,6,0.4)",grayscale:""}};function p(n){let{onClick:e}=n,{useMapEvents:r}=t(5589);return r({click:n=>{var t;let r=null===(t=n.originalEvent)||void 0===t?void 0:t.target;r&&(r.closest(".leaflet-marker-icon")||r.closest(".leaflet-marker-icon-demand")||r.closest(".leaflet-marker-icon-worker"))||e()}}),null}function v(n){let{points:e,onPointClick:t,highlightedId:i}=n;return(0,r.jsx)(r.Fragment,{children:e.map((n,e)=>{if(!n.pos||"number"!=typeof n.pos.lat||"number"!=typeof n.pos.lng||isNaN(n.pos.lat)||isNaN(n.pos.lng))return null;let a=i===n.id&&"demand"===n.pin_type;return(0,r.jsx)(o.J,{position:[n.pos.lat,n.pos.lng],icon:function(n){var e,t,r,o,i;let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("demand"===n.pin_type){let e=n.avatar||"https://i.pravatar.cc/100?u=".concat(n.id),t="$".concat(Math.round(n.price/1e3),"k"),u="driver"===n.travel_role,l="passenger"===n.travel_role,c=u?"#10b981":l?"#3b82f6":"#f59e0b",f=u?"rgba(16,185,129,0.5)":l?"rgba(59,130,246,0.5)":"rgba(245,158,11,0.5)",d=(null===(r=n.payload)||void 0===r?void 0:r.seats)?"\xb7".concat(n.payload.seats,"\uD83D\uDCBA"):"",p=(null===(o=n.payload)||void 0===o?void 0:o.destination_name)||(null===(i=n.payload)||void 0===i?void 0:i.destination_address)||"",v=p.length>12?p.slice(0,12)+"…":p,y="urgent"===n.urgency?'\n      <div style="position:absolute;top:-8px;right:-8px;background:#ef4444;color:white;font-size:10px;font-weight:900;padding:2px 6px;border-radius:999px;border:2px solid white;box-shadow:0 2px 8px rgba(239,68,68,0.4);animation:pulse 1.5s infinite;pointer-events:none">\uD83D\uDD25</div>\n    ':"",g=a?60:48,m=a?190:170,b=a?110:90,x=u||l?"".concat(u?"\uD83D\uDE97":l?"\uD83D\uDE4B":""," ").concat((n.name||"").split(" ")[0]).concat(d).concat(v?" → "+v:""):"".concat(a?"\uD83D\uDCCD ":"").concat((n.name||"").split(" ")[0]," \xb7 ").concat(t);return s().divIcon({className:"leaflet-marker-icon-demand",iconSize:[m,b],iconAnchor:[m/2,b],html:'\n        <div style="display:flex;flex-direction:column;align-items:center;cursor:pointer;transition:opacity 0.3s;pointer-events:auto;'.concat(a?"z-index:9999!important;":"",'">\n          <div style="width:').concat(g,"px;height:").concat(g,"px;border-radius:999px;padding:2.5px;background:white;box-shadow:").concat(a?"0 0 30px rgba(239,68,68,0.6),0 8px 24px ".concat(f):"0 8px 24px ".concat(f),";position:relative;border:3px solid ").concat(a?"#ef4444":c,';pointer-events:none">\n            <img src="').concat(e,'" style="width:100%;height:100%;border-radius:999px;object-fit:cover;pointer-events:none" />\n            <div style="position:absolute;bottom:1px;right:1px;width:11px;height:11px;background:').concat(c,';border:2px solid white;border-radius:999px;animation:pulse 2s infinite;pointer-events:none"></div>\n            ').concat(y,"\n            ").concat(a?'\n      <div style="position:absolute;inset:-12px;border-radius:999px;border:4px solid #ef4444;animation:pulse 1s infinite;pointer-events:none"></div>\n      <div style="position:absolute;inset:-20px;border-radius:999px;border:2px solid rgba(239,68,68,0.3);animation:pulse 1.5s infinite;pointer-events:none"></div>\n    ':"",'\n          </div>\n          <div style="background:').concat(a?"linear-gradient(135deg,#ef4444,".concat(c,")"):u?"linear-gradient(135deg,#10b981,#059669)":l?"linear-gradient(135deg,#3b82f6,#2563eb)":"linear-gradient(135deg,#f59e0b,#eab308)",";color:#ffffff;padding:").concat(a?"5px 14px":"4px 10px",";border-radius:999px;font-size:").concat(a?"13px":"10px",";font-weight:900;font-style:italic;margin-top:5px;box-shadow:0 4px 12px ").concat(f,';white-space:nowrap;max-width:160px;overflow:hidden;text-overflow:ellipsis;border:2px solid white;letter-spacing:-0.02em;pointer-events:none">\n            ').concat(x,"\n          </div>\n        </div>\n      ")})}let u=d[n.status]||d.inactive,l=n.avatar||"https://i.pravatar.cc/100?u=".concat(n.id),c=n.name.split(" ")[0],f="inactive"!==n.status?"$".concat(Math.round(n.price/1e3),"k"):"",p=(null===(e=n.active_route)||void 0===e?void 0:e.available_seats)&&n.active_route.available_seats>0,v=p?"\uD83D\uDC65".concat(null===(t=n.active_route)||void 0===t?void 0:t.available_seats):"",y="active"===n.status?p?"".concat(c," • ").concat(v):"".concat(c," • ").concat(f):"intermediate"===n.status?"".concat(c," • consultar"):c,g="urgent"===n.urgency?'\n    <div style="position:absolute;top:-8px;right:-8px;background:#ef4444;color:white;font-size:10px;font-weight:900;padding:2px 6px;border-radius:999px;border:2px solid white;box-shadow:0 2px 8px rgba(239,68,68,0.4);animation:pulse 1.5s infinite;pointer-events:none">\n      \uD83D\uDD25\n    </div>\n  ':"";return s().divIcon({className:"leaflet-marker-icon-worker",iconSize:[130,82],iconAnchor:[65,82],html:'\n      <div style="display:flex;flex-direction:column;align-items:center;cursor:pointer;opacity:'.concat(u.opacity,';transition:opacity 0.3s;pointer-events:auto">\n        <div style="width:48px;height:48px;border-radius:999px;padding:2.5px;background:white;box-shadow:').concat(u.shadow,";position:relative;border:2.5px solid ").concat(u.ring,';pointer-events:none">\n          <img src="').concat(l,'" style="width:100%;height:100%;border-radius:999px;object-fit:cover;').concat(u.grayscale,';pointer-events:none" />\n          <div style="position:absolute;bottom:1px;right:1px;width:11px;height:11px;background:').concat(u.dot,";border:2px solid white;border-radius:999px;").concat("active"===n.status?"animation:pulse 2s infinite":"",';pointer-events:none"></div>\n          ').concat(g,'\n        </div>\n        <div style="background:').concat(u.bg,';color:#ffffff;padding:4px 12px;border-radius:999px;font-size:11px;font-weight:900;font-style:italic;margin-top:5px;box-shadow:0 4px 12px rgba(0,0,0,0.15);white-space:nowrap;max-width:120px;overflow:hidden;text-overflow:ellipsis;border:2px solid white;letter-spacing:-0.02em;pointer-events:none">\n          ').concat(y,"\n        </div>\n      </div>\n    ")})}(n,a),zIndexOffset:a?1e3:0,eventHandlers:{click:e=>{e.originalEvent.stopPropagation(),e.originalEvent.stopImmediatePropagation(),e.originalEvent&&e.originalEvent.preventDefault(),console.log("\uD83D\uDCCD Pin clickeado:",n.pin_type||"worker",n.id,n.name),null==t||t(n)}},interactive:!0,bubblingMouseEvents:!1},"".concat(n.pin_type||"point","-").concat(n.id,"-").concat(e,"-").concat(a?"hl":""))})})}function y(n){let{onMapReady:e}=n,t=(0,i.Sx)();return(0,f.useEffect)(()=>{t&&(console.log("\uD83D\uDDFA️ MapController: Mapa inicializado, notificando..."),e(t))},[t,e]),null}let g=(0,f.forwardRef)((n,e)=>{let{points:t,onPointClick:o,onMapClick:i,mapCenter:c,highlightedId:s}=n,[d,g]=(0,f.useState)(null),m=(0,f.useRef)(null);(0,f.useEffect)(()=>{m.current=d},[d]),(0,f.useEffect)(()=>{d&&c&&(console.log("\uD83D\uDDFA️ Centrando mapa en:",c),d.flyTo([c.lat,c.lng],c.zoom,{duration:1.5}))},[d,c]);let b=(0,f.useCallback)(n=>{console.log("\uD83D\uDDFA️ MapSection: Mapa recibido y guardado en estado"),g(n),m.current=n,window.__leafletMap=n},[]),x=(0,f.useCallback)(()=>{if(m.current)return m.current;let n=document.querySelector(".leaflet-container");if(n){var e,t;let r=n._leaflet||n.__leaflet_map||n._leaflet_id&&(null===(t=window.L)||void 0===t?void 0:null===(e=t.maps)||void 0===e?void 0:e[n._leaflet_id]);if(r&&("function"==typeof r.flyTo||"function"==typeof r.setView))return r}return null},[]);return(0,f.useImperativeHandle)(e,()=>({flyTo:(n,e)=>(console.log("\uD83D\uDDFA️ MapSection.flyTo llamado:",n,e),new Promise(t=>{let r=t=>{try{if(t.invalidateSize(),"function"==typeof t.flyTo)return t.flyTo(n,e,{duration:1.5}),console.log("✅ flyTo ejecutado exitosamente"),!0;if("function"==typeof t.setView)return t.setView(n,e,{animate:!0,duration:1.5}),console.log("✅ setView ejecutado como fallback"),!0;return console.error("❌ El mapa no tiene m\xe9todos flyTo ni setView"),!1}catch(n){return console.error("❌ Error ejecutando flyTo/setView:",n),!1}},o=x();if(o){console.log("✅ Mapa encontrado, ejecutando flyTo"),t(r(o));return}console.warn("⚠️ Mapa no encontrado, esperando inicializaci\xf3n...");let i=0,a=setInterval(()=>{i++;let n=x();if(n){clearInterval(a),console.log("✅ Mapa encontrado durante espera"),t(r(n));return}i>=40&&(clearInterval(a),console.error("❌ Mapa nunca se inicializ\xf3 despu\xe9s de",2e3,"ms"),t(!1))},50)})),getMapInstance:()=>m.current,isReady:()=>null!==m.current||null!==x()}),[x]),(0,r.jsxs)(a.h,{center:[-37.6672,-72.573],zoom:15,minZoom:10,maxZoom:19,style:{height:"100%",width:"100%"},zoomControl:!1,children:[(0,r.jsx)(u.I,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,r.jsx)(l.L,{position:"bottomright"}),(0,r.jsx)(y,{onMapReady:b}),i&&(0,r.jsx)(p,{onClick:i}),(0,r.jsx)(v,{points:t,onPointClick:o,highlightedId:s})]})});g.displayName="MapSection",e.default=g},5046:function(){},6925:function(n,e,t){"use strict";t.d(e,{d:function(){return o}});var r=t(2265);function o(n,e){let t=(0,r.useRef)(e);(0,r.useEffect)(function(){e!==t.current&&null!=n.attributionControl&&(null!=t.current&&n.attributionControl.removeAttribution(t.current),null!=e&&n.attributionControl.addAttribution(e)),t.current=e},[n,e])}},782:function(n,e,t){"use strict";t.d(e,{G5:function(){return l},LE:function(){return u},RA:function(){return a}});var r=t(2265),o=t(4887),i=t(1080);function a(n){return(0,r.forwardRef)(function(e,t){let{instance:o,context:a}=n(e).current;return(0,r.useImperativeHandle)(t,()=>o),null==e.children?null:r.createElement(i.UO,{value:a},e.children)})}function u(n){return(0,r.forwardRef)(function(e,t){let[i,a]=(0,r.useState)(!1),{instance:u}=n(e,a).current;(0,r.useImperativeHandle)(t,()=>u),(0,r.useEffect)(function(){i&&u.update()},[u,i,e.children]);let l=u._contentNode;return l?(0,o.createPortal)(e.children,l):null})}function l(n){return(0,r.forwardRef)(function(e,t){let{instance:o}=n(e).current;return(0,r.useImperativeHandle)(t,()=>o),null})}},1080:function(n,e,t){"use strict";t.d(e,{Hb:function(){return o},UO:function(){return u},mE:function(){return l},sj:function(){return i}});var r=t(2265);function o(n){return Object.freeze({__version:1,map:n})}function i(n,e){return Object.freeze({...n,...e})}let a=(0,r.createContext)(null),u=a.Provider;function l(){let n=(0,r.useContext)(a);if(null==n)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}},2121:function(n,e,t){"use strict";t.d(e,{y:function(){return i}});var r=t(2265),o=t(1080);function i(n){return function(e){let t=(0,o.mE)(),i=n(e,t),{instance:a}=i.current,u=(0,r.useRef)(e.position),{position:l}=e;return(0,r.useEffect)(function(){return a.addTo(t.map),function(){a.remove()}},[t.map,a]),(0,r.useEffect)(function(){null!=l&&l!==u.current&&(a.setPosition(l),u.current=l)},[a,l]),i}}},2538:function(n,e,t){"use strict";t.d(e,{I:function(){return i},O:function(){return o}});var r=t(2265);function o(n,e,t){return Object.freeze({instance:n,context:e,container:t})}function i(n,e){return null==e?function(e,t){let o=(0,r.useRef)();return o.current||(o.current=n(e,t)),o}:function(t,o){let i=(0,r.useRef)();i.current||(i.current=n(t,o));let a=(0,r.useRef)(t),{instance:u}=i.current;return(0,r.useEffect)(function(){a.current!==t&&(e(u,t,a.current),a.current=t)},[u,t,o]),i}}},4064:function(n,e,t){"use strict";t.d(e,{t:function(){return o}});var r=t(2265);function o(n,e){let t=(0,r.useRef)();(0,r.useEffect)(function(){return null!=e&&n.instance.on(e),t.current=e,function(){null!=t.current&&n.instance.off(t.current),t.current=null}},[n,e])}},4271:function(n,e,t){"use strict";t.d(e,{vm:function(){return d},dW:function(){return p},SO:function(){return v},Au:function(){return y},Lf:function(){return g}});var r=t(782),o=t(2121),i=t(2538),a=t(9582),u=t(6925),l=t(1080),c=t(4064),s=t(8651),f=t(2265);function d(n){let e=(0,i.I)(function(e,t){return(0,i.O)(n(e),t)}),t=(0,o.y)(e);return(0,r.G5)(t)}function p(n,e){let t=(0,i.I)(n,e),o=(0,a.u)(t);return(0,r.RA)(o)}function v(n,e){var t;let o=(t=(0,i.I)(n),function(n,r){let o=(0,l.mE)(),i=t((0,s.q)(n,o),o);return(0,u.d)(o.map,n.attribution),(0,c.t)(i.current,n.eventHandlers),e(i.current,o,n,r),i});return(0,r.LE)(o)}function y(n,e){var t;let o=(t=(0,i.I)(n,e),function(n){let e=(0,l.mE)(),r=t((0,s.q)(n,e),e);return(0,c.t)(r.current,n.eventHandlers),(0,a.g)(r.current,e),function(n,e){let t=(0,f.useRef)();(0,f.useEffect)(function(){if(e.pathOptions!==t.current){let r=e.pathOptions??{};n.instance.setStyle(r),t.current=r}},[n,e])}(r.current,n),r});return(0,r.RA)(o)}function g(n,e){let t=(0,i.I)(n,e),o=(0,a.u)(t);return(0,r.G5)(o)}},3918:function(n,e,t){"use strict";function r(n,e,t){let{opacity:r,zIndex:o}=e;null!=r&&r!==t.opacity&&n.setOpacity(r),null!=o&&o!==t.zIndex&&n.setZIndex(o)}t.d(e,{I:function(){return r}})},9582:function(n,e,t){"use strict";t.d(e,{g:function(){return l},u:function(){return c}});var r=t(2265),o=t(6925),i=t(1080),a=t(4064),u=t(8651);function l(n,e){(0,r.useEffect)(function(){return(e.layerContainer??e.map).addLayer(n.instance),function(){e.layerContainer?.removeLayer(n.instance),e.map.removeLayer(n.instance)}},[e,n])}function c(n){return function(e){let t=(0,i.mE)(),r=n((0,u.q)(e,t),t);return(0,o.d)(t.map,e.attribution),(0,a.t)(r.current,e.eventHandlers),l(r.current,t),r}}},8651:function(n,e,t){"use strict";function r(n,e){let t=n.pane??e.pane;return t?{...n,pane:t}:n}t.d(e,{q:function(){return r}})},755:function(n,e,t){"use strict";t.d(e,{h:function(){return u}});var r=t(1080),o=t(759),i=t(2265);function a(){return(a=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}let u=(0,i.forwardRef)(function({bounds:n,boundsOptions:e,center:t,children:u,className:l,id:c,placeholder:s,style:f,whenReady:d,zoom:p,...v},y){let[g]=(0,i.useState)({className:l,id:c,style:f}),[m,b]=(0,i.useState)(null);(0,i.useImperativeHandle)(y,()=>m?.map??null,[m]);let x=(0,i.useCallback)(i=>{if(null!==i&&null===m){let a=new o.Map(i,v);null!=t&&null!=p?a.setView(t,p):null!=n&&a.fitBounds(n,e),null!=d&&a.whenReady(d),b((0,r.Hb)(a))}},[]);(0,i.useEffect)(()=>()=>{m?.map.remove()},[m]);let h=m?i.createElement(r.UO,{value:m},u):s??null;return i.createElement("div",a({},g,{ref:x}),h)})},8369:function(n,e,t){"use strict";t.d(e,{J:function(){return u}});var r=t(4271),o=t(2538),i=t(1080),a=t(759);let u=(0,r.dW)(function({position:n,...e},t){let r=new a.Marker(n,e);return(0,o.O)(r,(0,i.sj)(t,{overlayContainer:r}))},function(n,e,t){e.position!==t.position&&n.setLatLng(e.position),null!=e.icon&&e.icon!==t.icon&&n.setIcon(e.icon),null!=e.zIndexOffset&&e.zIndexOffset!==t.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),null!=e.opacity&&e.opacity!==t.opacity&&n.setOpacity(e.opacity),null!=n.dragging&&e.draggable!==t.draggable&&(!0===e.draggable?n.dragging.enable():n.dragging.disable())})},2896:function(n,e,t){"use strict";t.d(e,{I:function(){return l}});var r=t(4271),o=t(8651),i=t(2538),a=t(3918),u=t(759);let l=(0,r.Lf)(function({url:n,...e},t){let r=new u.TileLayer(n,(0,o.q)(e,t));return(0,i.O)(r,t)},function(n,e,t){(0,a.I)(n,e,t);let{url:r}=e;null!=r&&r!==t.url&&n.setUrl(r)})},6881:function(n,e,t){"use strict";t.d(e,{L:function(){return i}});var r=t(4271),o=t(759);let i=(0,r.vm)(function(n){return new o.Control.Zoom(n)})},2679:function(n,e,t){"use strict";t.d(e,{$_:function(){return a},Sx:function(){return i},zV:function(){return u}});var r=t(1080),o=t(2265);function i(){return(0,r.mE)().map}function a(n,e){let t=i();return(0,o.useEffect)(function(){return t.on(n,e),function(){t.off(n,e)}},[t,n,e]),t}function u(n){let e=i();return(0,o.useEffect)(function(){return e.on(n),function(){e.off(n)}},[e,n]),e}},5589:function(n,e,t){"use strict";t.r(e),t.d(e,{AttributionControl:function(){return a},Circle:function(){return s},CircleMarker:function(){return f},FeatureGroup:function(){return d},GeoJSON:function(){return p},ImageOverlay:function(){return y},LayerGroup:function(){return g},LayersControl:function(){return C},MapContainer:function(){return E.h},Marker:function(){return k.J},Pane:function(){return _},Polygon:function(){return j},Polyline:function(){return S},Popup:function(){return P},Rectangle:function(){return M},SVGOverlay:function(){return N},ScaleControl:function(){return z},TileLayer:function(){return H.I},Tooltip:function(){return V},VideoOverlay:function(){return B},WMSTileLayer:function(){return q},ZoomControl:function(){return F.L},useMap:function(){return r.Sx},useMapEvent:function(){return r.$_},useMapEvents:function(){return r.zV}});var r=t(2679),o=t(4271),i=t(759);let a=(0,o.vm)(function(n){return new i.Control.Attribution(n)});var u=t(2538),l=t(1080);function c(n,e,t){e.center!==t.center&&n.setLatLng(e.center),null!=e.radius&&e.radius!==t.radius&&n.setRadius(e.radius)}let s=(0,o.Au)(function({center:n,children:e,...t},r){let o=new i.Circle(n,t);return(0,u.O)(o,(0,l.sj)(r,{overlayContainer:o}))},c),f=(0,o.Au)(function({center:n,children:e,...t},r){let o=new i.CircleMarker(n,t);return(0,u.O)(o,(0,l.sj)(r,{overlayContainer:o}))},c),d=(0,o.Au)(function({children:n,...e},t){let r=new i.FeatureGroup([],e);return(0,u.O)(r,(0,l.sj)(t,{layerContainer:r,overlayContainer:r}))}),p=(0,o.Au)(function({data:n,...e},t){let r=new i.GeoJSON(n,e);return(0,u.O)(r,(0,l.sj)(t,{overlayContainer:r}))},function(n,e,t){e.style!==t.style&&(null==e.style?n.resetStyle():n.setStyle(e.style))});function v(n,e,t){e.bounds instanceof i.LatLngBounds&&e.bounds!==t.bounds&&n.setBounds(e.bounds),null!=e.opacity&&e.opacity!==t.opacity&&n.setOpacity(e.opacity),null!=e.zIndex&&e.zIndex!==t.zIndex&&n.setZIndex(e.zIndex)}let y=(0,o.dW)(function({bounds:n,url:e,...t},r){let o=new i.ImageOverlay(e,n,t);return(0,u.O)(o,(0,l.sj)(r,{overlayContainer:o}))},function(n,e,t){if(v(n,e,t),e.bounds!==t.bounds){let t=e.bounds instanceof i.LatLngBounds?e.bounds:new i.LatLngBounds(e.bounds);n.setBounds(t)}e.url!==t.url&&n.setUrl(e.url)}),g=(0,o.dW)(function({children:n,...e},t){let r=new i.LayerGroup([],e);return(0,u.O)(r,(0,l.sj)(t,{layerContainer:r}))});var m=t(2121),b=t(782),x=t(2265);let h=(0,u.I)(function({children:n,...e},t){let r=new i.Control.Layers(void 0,void 0,e);return(0,u.O)(r,(0,l.sj)(t,{layersControl:r}))},function(n,e,t){e.collapsed!==t.collapsed&&(!0===e.collapsed?n.collapse():n.expand())}),w=(0,m.y)(h),C=(0,b.RA)(w);function O(n){return function(e){let t=(0,l.mE)(),r=(0,x.useRef)(e),[o,i]=(0,x.useState)(null),{layersControl:a,map:u}=t,c=(0,x.useCallback)(e=>{null!=a&&(r.current.checked&&u.addLayer(e),n(a,e,r.current.name),i(e))},[a,u]),s=(0,x.useCallback)(n=>{a?.removeLayer(n),i(null)},[a]),f=(0,x.useMemo)(()=>(0,l.sj)(t,{layerContainer:{addLayer:c,removeLayer:s}}),[t,c,s]);return(0,x.useEffect)(()=>{null!==o&&r.current!==e&&(!0===e.checked&&(null==r.current.checked||!1===r.current.checked)?u.addLayer(o):!0===r.current.checked&&(null==e.checked||!1===e.checked)&&u.removeLayer(o),r.current=e)}),e.children?x.createElement(l.UO,{value:f},e.children):null}}C.BaseLayer=O(function(n,e,t){n.addBaseLayer(e,t)}),C.Overlay=O(function(n,e,t){n.addOverlay(e,t)});var E=t(755),k=t(8369),L=t(4887);let D=["mapPane","markerPane","overlayPane","popupPane","shadowPane","tilePane","tooltipPane"];function I(n,e){let{[e]:t,...r}=n;return r}let _=(0,x.forwardRef)(function(n,e){let[t]=(0,x.useState)(n.name),[r,o]=(0,x.useState)(null);(0,x.useImperativeHandle)(e,()=>r,[r]);let a=(0,l.mE)(),u=(0,x.useMemo)(()=>({...a,pane:t}),[a]);return(0,x.useEffect)(()=>(o(function(n,e,t){if(-1!==D.indexOf(n))throw Error(`You must use a unique name for a pane that is not a default Leaflet pane: ${n}`);if(null!=t.map.getPane(n))throw Error(`A pane with this name already exists: ${n}`);let r=e.pane??t.pane,o=r?t.map.getPane(r):void 0,a=t.map.createPane(n,o);return null!=e.className&&function(n,e){e.split(" ").filter(Boolean).forEach(e=>{i.DomUtil.addClass(n,e)})}(a,e.className),null!=e.style&&Object.keys(e.style).forEach(n=>{a.style[n]=e.style[n]}),a}(t,n,a)),function(){let n=a.map.getPane(t);n?.remove?.(),null!=a.map._panes&&(a.map._panes=I(a.map._panes,t),a.map._paneRenderers=I(a.map._paneRenderers,t))}),[]),null!=n.children&&null!=r?(0,L.createPortal)(x.createElement(l.UO,{value:u},n.children),r):null}),j=(0,o.Au)(function({positions:n,...e},t){let r=new i.Polygon(n,e);return(0,u.O)(r,(0,l.sj)(t,{overlayContainer:r}))},function(n,e,t){e.positions!==t.positions&&n.setLatLngs(e.positions)}),S=(0,o.Au)(function({positions:n,...e},t){let r=new i.Polyline(n,e);return(0,u.O)(r,(0,l.sj)(t,{overlayContainer:r}))},function(n,e,t){e.positions!==t.positions&&n.setLatLngs(e.positions)}),P=(0,o.SO)(function(n,e){let t=new i.Popup(n,e.overlayContainer);return(0,u.O)(t,e)},function(n,e,{position:t},r){(0,x.useEffect)(function(){let{instance:o}=n;function i(n){n.popup===o&&(o.update(),r(!0))}function a(n){n.popup===o&&r(!1)}return e.map.on({popupopen:i,popupclose:a}),null==e.overlayContainer?(null!=t&&o.setLatLng(t),o.openOn(e.map)):e.overlayContainer.bindPopup(o),function(){e.map.off({popupopen:i,popupclose:a}),e.overlayContainer?.unbindPopup(),e.map.removeLayer(o)}},[n,e,r,t])}),M=(0,o.Au)(function({bounds:n,...e},t){let r=new i.Rectangle(n,e);return(0,u.O)(r,(0,l.sj)(t,{overlayContainer:r}))},function(n,e,t){e.bounds!==t.bounds&&n.setBounds(e.bounds)}),z=(0,o.vm)(function(n){return new i.Control.Scale(n)});var R=t(9582);let A=(0,u.I)(function(n,e){let{attributes:t,bounds:r,...o}=n,a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("xmlns","http://www.w3.org/2000/svg"),null!=t&&Object.keys(t).forEach(n=>{a.setAttribute(n,t[n])});let l=new i.SVGOverlay(a,r,o);return(0,u.O)(l,e,a)},v),T=(0,R.u)(A),N=(0,x.forwardRef)(function({children:n,...e},t){let{instance:r,container:o}=T(e).current;return(0,x.useImperativeHandle)(t,()=>r),null==o||null==n?null:(0,L.createPortal)(n,o)});var H=t(2896);let V=(0,o.SO)(function(n,e){let t=new i.Tooltip(n,e.overlayContainer);return(0,u.O)(t,e)},function(n,e,{position:t},r){(0,x.useEffect)(function(){let o=e.overlayContainer;if(null==o)return;let{instance:i}=n,a=n=>{n.tooltip===i&&(null!=t&&i.setLatLng(t),i.update(),r(!0))},u=n=>{n.tooltip===i&&r(!1)};return o.on({tooltipopen:a,tooltipclose:u}),o.bindTooltip(i),function(){o.off({tooltipopen:a,tooltipclose:u}),null!=o._map&&o.unbindTooltip()}},[n,e,r,t])}),B=(0,o.dW)(function({bounds:n,url:e,...t},r){let o=new i.VideoOverlay(e,n,t);return!0===t.play&&o.getElement()?.play(),(0,u.O)(o,(0,l.sj)(r,{overlayContainer:o}))},function(n,e,t){v(n,e,t),"string"==typeof e.url&&e.url!==t.url&&n.setUrl(e.url);let r=n.getElement();null==r||(!0!==e.play||t.play?e.play||!0!==t.play||r.pause():r.play())});var G=t(8651),U=t(3918);let q=(0,o.Lf)(function({eventHandlers:n,params:e={},url:t,...r},o){let a=new i.TileLayer.WMS(t,{...e,...(0,G.q)(r,o)});return(0,u.O)(a,o)},function(n,e,t){(0,U.I)(n,e,t),null!=e.params&&e.params!==t.params&&n.setParams(e.params)});var F=t(6881)}}]);