"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[579],{6579:function(e,t,r){r.r(t),r.d(t,{default:function(){return i}});var a=r(7437),o=r(2265),s=r(8593);function i(e){let{user:t,onClose:r}=e,[i,l]=(0,o.useState)(null),[n,d]=(0,o.useState)(null),[c,x]=(0,o.useState)(null),[u,h]=(0,o.useState)([{id:1,name:"Gasfiter\xeda",active:!0},{id:2,name:"Electricidad",active:!1},{id:3,name:"Carpinter\xeda",active:!0},{id:4,name:"Pintura",active:!1},{id:5,name:"Jardiner\xeda",active:!0}]),[m,p]=(0,o.useState)(""),[v,b]=(0,o.useState)(null),[f,g]=(0,o.useState)(null),[j,w]=(0,o.useState)(!1),[N,k]=(0,o.useState)("active"),[y,C]=(0,o.useState)(!1),[D,E]=(0,o.useState)(!1),[S,M]=(0,o.useState)(null),[L,B]=(0,o.useState)(0);(0,o.useEffect)(()=>{z()},[t.token]);let z=async()=>{try{C(!0);let e=await fetch("".concat(s.C,"/worker/profile"),{headers:{Authorization:"Bearer ".concat(t.token)}});if(e.ok){let t=await e.json();t.skills&&h(t.skills),t.cv_url&&(d(t.cv_url),x(t.cv_filename)),t.showcase_video&&p(t.showcase_video.url),t.ranking&&M(t.ranking),void 0!==t.validated_friends&&B(t.validated_friends)}}catch(e){console.error("Error loading profile:",e)}finally{C(!1)}},A=async e=>{h(u.map(t=>t.id===e?{...t,active:!t.active}:t))},_=(0,o.useCallback)(e=>{e.preventDefault();let t=e.dataTransfer.files[0];t&&"application/pdf"===t.type&&t.size<=5242880?V(t):alert("Solo archivos PDF de m\xe1ximo 5MB")},[t.token]),V=async e=>{l(e);let r=new FormData;r.append("cv",e);try{let e=await fetch("".concat(s.C,"/worker/cv"),{method:"POST",headers:{Authorization:"Bearer ".concat(t.token)},body:r});if(e.ok){let t=await e.json();d(t.cv_url),x(t.cv_filename)}else alert("Error al subir el CV"),l(null)}catch(e){console.error("Error uploading CV:",e),alert("Error de conexi\xf3n"),l(null)}},F=async()=>{try{(await fetch("".concat(s.C,"/worker/cv"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t.token)}})).ok&&(l(null),d(null),x(null))}catch(e){console.error("Error deleting CV:",e)}},P=async()=>{E(!0);try{(await fetch("".concat(s.C,"/worker/skills"),{method:"POST",headers:{Authorization:"Bearer ".concat(t.token),"Content-Type":"application/json"},body:JSON.stringify({skills:u})})).ok?alert("Cambios guardados exitosamente"):alert("Error al guardar los cambios")}catch(e){console.error("Error saving:",e),alert("Error de conexi\xf3n")}finally{E(!1)}},T=async e=>{g(e),w(!0);let r=new FormData;r.append("video",e),r.append("type","showcase");try{let e=await fetch("".concat(s.C,"/worker/video"),{method:"POST",headers:{Authorization:"Bearer ".concat(t.token)},body:r});if(e.ok){let t=await e.json();p(t.video.url),b(t.video.id)}else alert("Error al subir el video"),g(null)}catch(e){console.error("Error uploading video:",e),alert("Error de conexi\xf3n"),g(null)}finally{w(!1)}},O=async()=>{if(v)try{(await fetch("".concat(s.C,"/worker/video/").concat(v),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t.token)}})).ok&&(p(""),b(null),g(null))}catch(e){console.error("Error deleting video:",e)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-[250] flex items-end justify-center",children:(0,a.jsxs)("div",{className:"bg-white rounded-t-2xl shadow-2xl w-full max-w-md max-h-[95vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 p-6 relative",children:[(0,a.jsx)("button",{onClick:r,className:"absolute top-4 right-4 w-8 h-8 bg-white/20 rounded-full flex items-center justify-center text-white hover:bg-white/30 transition",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"relative mb-3",children:[(0,a.jsx)("div",{className:"absolute -inset-2 bg-white/30 rounded-full blur-md"}),t.avatarUrl?(0,a.jsx)("img",{src:t.avatarUrl,className:"relative w-20 h-20 rounded-full border-4 border-white object-cover shadow-lg",alt:t.firstName}):(0,a.jsx)("div",{className:"relative w-20 h-20 rounded-full border-4 border-white bg-white/30 flex items-center justify-center text-white font-bold text-2xl shadow-lg",children:t.firstName.charAt(0).toUpperCase()}),(0,a.jsx)("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 ".concat({active:"bg-green-500",intermediate:"bg-yellow-500",inactive:"bg-gray-500"}[N]," border-3 border-white rounded-full shadow-md")})]}),(0,a.jsx)("h2",{className:"text-xl font-black italic text-white",children:t.name}),(0,a.jsx)("p",{className:"text-sm text-white/90 font-medium",children:{active:"Disponible ahora",intermediate:"Semi-disponible",inactive:"No disponible"}[N]}),S&&S.position&&(0,a.jsx)("div",{className:"mt-3 bg-white/20 backdrop-blur-sm rounded-full px-4 py-2 border border-white/30",children:(0,a.jsxs)("p",{className:"text-xs font-bold text-white",children:["\uD83C\uDFC6 #",S.position," de ",S.total," en ",S.category]})})]})]}),(0,a.jsxs)("div",{className:"p-5 space-y-5",children:[S&&S.position&&(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center text-2xl shadow-lg",children:1===S.position?"\uD83E\uDD47":2===S.position?"\uD83E\uDD48":3===S.position?"\uD83E\uDD49":"\uD83C\uDFC6"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs font-bold text-slate-600",children:"Tu Posici\xf3n Competitiva"}),(0,a.jsxs)("p",{className:"text-lg font-black text-slate-800",children:["#",S.position," de ",S.total]}),(0,a.jsx)("p",{className:"text-[10px] text-slate-500",children:S.category})]})]}),S.position<=3&&(0,a.jsx)("div",{className:"mt-3 pt-3 border-t border-purple-200",children:(0,a.jsx)("p",{className:"text-xs text-purple-700 font-semibold",children:"⭐ Est\xe1s en el top 3 de tu categor\xeda"})})]}),L>0&&(0,a.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200/50",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl flex items-center justify-center text-2xl shadow-lg",children:"\uD83E\uDD1D"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs font-bold text-slate-600",children:"Red de Confianza"}),(0,a.jsxs)("p",{className:"text-lg font-black text-slate-800",children:[L," colega",L>1?"s":""]}),(0,a.jsx)("p",{className:"text-[10px] text-slate-500",children:"respaldan tu experiencia"})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-black italic text-gray-800 mb-3",children:"\uD83D\uDCC4 Mi Curr\xedculum"}),n||i?(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-bold text-gray-800 truncate",children:c||(null==i?void 0:i.name)}),(0,a.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"✓ Subido correctamente"})]}),(0,a.jsx)("button",{onClick:F,className:"text-gray-400 hover:text-red-500",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,a.jsxs)("div",{onDrop:_,onDragOver:e=>e.preventDefault(),className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-orange-400 hover:bg-orange-50 transition cursor-pointer",children:[(0,a.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&"application/pdf"===r.type&&r.size<=5242880?V(r):alert("Solo archivos PDF de m\xe1ximo 5MB")},className:"hidden",id:"cv-upload"}),(0,a.jsxs)("label",{htmlFor:"cv-upload",className:"cursor-pointer",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl flex items-center justify-center mx-auto mb-2",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,a.jsx)("p",{className:"text-sm font-bold text-gray-700",children:"Arrastra tu CV aqu\xed"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"PDF m\xe1ximo 5MB"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-black italic text-gray-800 mb-3",children:"\uD83D\uDEE0️ Mis Habilidades"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:u.map(e=>(0,a.jsxs)("button",{onClick:()=>A(e.id),className:"px-3 py-1.5 rounded-full text-xs font-bold transition-all ".concat(e.active?"bg-gradient-to-r from-yellow-400 to-orange-500 text-white shadow-md":"bg-gray-200 text-gray-600 hover:bg-gray-300"),children:[e.active?"✓ ":"",e.name]},e.id))}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Haz clic para activar/desactivar habilidades"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-black italic text-gray-800 mb-3",children:"\uD83C\uDFA5 Video Curr\xedculum"}),m?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"bg-gray-900 rounded-xl overflow-hidden",children:(0,a.jsx)("video",{src:m,controls:!0,className:"w-full aspect-video",poster:"/video-poster.jpg",children:"Tu navegador no soporta videos."})}),(0,a.jsx)("button",{onClick:O,className:"absolute top-2 right-2 w-8 h-8 bg-red-500/80 hover:bg-red-600 rounded-full flex items-center justify-center text-white transition",title:"Eliminar video",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-orange-400 hover:bg-orange-50 transition cursor-pointer",children:[(0,a.jsx)("input",{type:"file",accept:"video/mp4,video/quicktime,video/avi",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&("video/mp4"===r.type||"video/quicktime"===r.type||"video/avi"===r.type)?r.size<=31457280?T(r):alert("El video no debe superar los 30MB"):alert("Solo archivos MP4, MOV o AVI")},className:"hidden",id:"video-upload",disabled:j}),(0,a.jsxs)("label",{htmlFor:"video-upload",className:"cursor-pointer ".concat(j?"opacity-50":""),children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl flex items-center justify-center mx-auto mb-2",children:j?(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,a.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,a.jsx)("p",{className:"text-sm font-bold text-gray-700",children:j?"Subiendo video...":"Sube tu video curr\xedculum"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"MP4/MOV/AVI m\xe1ximo 30MB"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"30 segundos para destacar tus servicios"})]})]})]}),(0,a.jsx)("button",{onClick:P,disabled:D,className:"w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-black italic py-3 rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:D?"Guardando...":"Guardar Cambios"})]})]})})}},8593:function(e,t,r){r.d(t,{C:function(){return a}});let a="/api"}}]);